/*!
 * jQuery Polling Plugin v0.2
 * https://github.com/riga/jquery.polling
 *
 * Copyright 2012, Marcel Rieger
 * Dual licensed under the MIT or GPL Version 3 licenses.
 * http://www.opensource.org/licenses/mit-license
 * http://www.opensource.org/licenses/GPL-3.0
 */
var _polling={};jQuery.Polling=function(r){var p=r&&_polling[r];if(!p){var f=[],h=jQuery.Callbacks(),e={autoRun:false,delay:5000,cycles:-1,end:jQuery.Callbacks()},t=0,k=false,u=null,o=false,c=false,s=jQuery.Deferred(),q=function(y){jQuery.extend(true,e,y);return this},n=function(){var y=jQuery.makeArray(arguments);if(y.length){f=jQuery.merge(f,y);if(e.autoRun){l()}}return this},l=function(){window.clearTimeout(u);if(!o){k=true;var y=[];jQuery.each(f,function(A,B){var z=B();y.push((z&&z.promise)?z.promise():z)});t++;if(e.cycles>-1&&t>=e.cycles){w(e.end.fire||e.end)}jQuery.when.apply(null,y).then(function(){h.fire.apply(h,y);if(c){s.resolve()}else{u=window.setTimeout(l,e.delay)}})}return this},x=function(){var z=jQuery.makeArray(arguments);var y=jQuery.Deferred().done(function(){f=jQuery.grep(f,function(A){return jQuery.inArray(A,z)==-1});b()});w(y.resolve);return this},g=function(){var y=jQuery.Deferred().done(function(){f=[];b()});w(y.resolve);return this},w=function(y){y=y.fire||y;if(!k||u){window.clearTimeout(u);k=false;o=true;y()}else{s=jQuery.Deferred().done(function(){o=true;c=k=false},y);c=true}return this},b=function(y){t=y?0:t;c=false;if(o){o=false;l()}return this},j=function(){h.add(jQuery.makeArray(arguments));return this},m=function(){h.remove(jQuery.makeArray(arguments));return this},i=function(){h.empty();return this},d=function(){return t},v=function(){return o},a=function(){return k};p={setup:q,add:n,run:l,remove:x,empty:g,lock:w,unlock:b,notify:j,disnotify:m,emptyNotify:i,count:d,locked:v,running:a};if(r){_polling[r]=p}}return p};