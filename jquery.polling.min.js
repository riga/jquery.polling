/*!
 * jQuery Polling Plugin v0.1
 * https://github.com/riga/jquery.polling
 *
 * Copyright 2012, Marcel Rieger
 * Dual licensed under the MIT or GPL Version 3 licenses.
 * http://www.opensource.org/licenses/mit-license
 * http://www.opensource.org/licenses/GPL-3.0
 */
var _polling={};jQuery.Polling=function(r){var p=r&&_polling[r];if(!p){var f=[],h=jQuery.Callbacks(),e={autoRun:false,delay:5000,cycles:-1,end:jQuery.Callbacks()},u=0,k=false,v=null,o=false,c=false,s=jQuery.Deferred(),q=function(B){jQuery.extend(true,e,B);return this},n=function(){if(arguments.length>0){f=jQuery.merge(f,arguments);if(e.autoRun){p.run()}}return this},l=function(){window.clearTimeout(v);if(!o){k=true;var B=[];jQuery.each(f,function(D,E){var C=E();B.push((C&&C.promise)?C.promise():C)});u++;if(e.cycles>-1&&u>=e.cycles){x(e.end.fire||e.end)}jQuery.when.apply(null,B).then(function(){h.fire.apply(h,B);if(c){s.resolve()}else{v=window.setTimeout(l,e.delay)}})}return this},A=function(){var C=jQuery.makeArray(arguments);var B=jQuery.Deferred().done(function(){f=jQuery.grep(f,function(D){return jQuery.inArray(D,C)==-1});b()});x(B.resolve);return this},g=function(){var B=jQuery.Deferred().done(function(){f=[];b()});x(B.resolve);return this},x=function(B){B=B.fire||B;if(!k||v){window.clearTimeout(v);k=false;o=true;B()}else{s=jQuery.Deferred().done(function(){o=true;c=k=false},B);c=true}return this},b=function(B){u=B?0:u;c=false;if(o){o=false;l()}return this},j=function(){h.add(jQuery.makeArray(arguments));return this},m=function(){h.remove(jQuery.makeArray(arguments));return this},i=function(){h.empty();return this},z=function(){return f},t=function(){return h},y=function(){return e},d=function(){return u},w=function(){return o},a=function(){return k};p={setup:q,add:n,run:l,remove:A,empty:g,lock:x,unlock:b,notify:j,disnotify:m,emptyNotify:i,callbacks:z,notifications:t,config:y,count:d,locked:w,running:a};if(r){_polling[r]=p}}return p};