/*!
 * jQuery Polling Plugin v0.3
 * https://github.com/riga/jquery.polling
 *
 * Copyright 2014, Marcel Rieger
 * Dual licensed under the MIT or GPL Version 3 licenses.
 * http://www.opensource.org/licenses/mit-license
 * http://www.opensource.org/licenses/GPL-3.0
 */
(function(b,c){var a={};
c.Polling=function(u){var s=u&&a[u];if(!s){var i=[],k=c.Callbacks(),h={autoRun:false,delay:5000,cycles:-1,end:c.Callbacks()},w=0,n=false,x=null,r=false,f=false,v=c.Deferred(),t=function(B){c.extend(true,h,B);
return this;},q=function(){var B=c.makeArray(arguments);if(B.length){i=c.merge(i,B);if(h.autoRun){o();}}return this;},o=function(){b.clearTimeout(x);if(!r){n=true;
var B=[];c.each(i,function(D,E){var C=E();B.push((C&&C.promise)?C.promise():C);});w++;if(h.cycles>-1&&w>=h.cycles){z(h.end.fire||h.end);}c.when.apply(null,B).then(function(){k.fire.apply(k,B);
if(f){v.resolve();}else{x=b.setTimeout(o,h.delay);}});}return this;},A=function(){var C=c.makeArray(arguments);var B=c.Deferred().done(function(){i=c.grep(i,function(D){return c.inArray(D,C)==-1;
});e();});z(B.resolve);return this;},j=function(){var B=c.Deferred().done(function(){i=[];e();});z(B.resolve);return this;},z=function(B){B=B||function(){};
B=B.fire||B;if(!n||x){b.clearTimeout(x);n=false;r=true;B();}else{v=c.Deferred().done(function(){r=true;f=n=false;},B);f=true;}return this;},e=function(B){w=B?0:w;
f=false;if(r){r=false;o();}return this;},m=function(){k.add(c.makeArray(arguments));return this;},p=function(){k.remove(c.makeArray(arguments));return this;
},l=function(){k.empty();return this;},g=function(){return w;},y=function(){return r;},d=function(){return n;};s={setup:t,add:q,run:o,remove:A,empty:j,lock:z,unlock:e,notify:m,disnotify:p,emptyNotify:l,count:g,locked:y,running:d};
if(u){a[u]=s;}}return s;};})(window,jQuery);